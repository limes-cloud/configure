import{x as C}from"./index.dcee45e5.js";/* empty css              */import{d as B,e as p,b3 as D,b1 as E,b2 as I,bf as N,b9 as L,bH as O,aC as r,aJ as c,aG as $,A as n,B as x,aL as J,aD as d,aM as b,aO as M,ba as R}from"./arco.5cfe922d.js";import{a as T,b as j}from"./api.d6cc5a25.js";const K=B({__name:"value",props:{type:{},envs:{}},setup(V,{expose:g}){const v=p(),i=p(!1),f=p(0),m=V,y=p([]),a=p({});g({showUpdateDrawer:async l=>{f.value=l,a.value={};const{data:o}=await T({businessId:l});y.value=o.list,o.list.forEach(t=>{let s=t.value;(m.type==="int"||m.type==="float")&&(s=JSON.parse(t.value)),m.type==="bool"&&(s=t.value==="true"),a.value[String(t.envId)]=s}),i.value=!0},closeDrawer:()=>{i.value=!1}});const w=async()=>{if(await v.value.validate())return!1;const o=[];return m.envs.forEach(t=>{const s=a.value[String(t.id)];o.push({envId:t.id,value:String(s)})}),await j({businessId:f.value,list:o}),$.success("\u8BBE\u7F6E\u6210\u529F"),!0};return(l,o)=>{const t=D,s=E,_=I,h=N,F=R,S=L,k=O;return n(),r(k,{visible:i.value,"onUpdate:visible":o[0]||(o[0]=e=>i.value=e),title:"\u8D44\u6E90\u503C\u914D\u7F6E",width:"380px",footer:l.$hasPermission("configure:business:value:update"),onCancel:o[1]||(o[1]=e=>i.value=!1),onBeforeOk:w},{default:c(()=>[l.type?(n(),r(S,{key:0,ref_key:"formRef",ref:v,model:a.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:c(()=>[(n(!0),x(M,null,J(l.envs,(e,U)=>(n(),r(F,{key:U,field:String(e.id),label:e.name+"("+e.keyword+")",rules:[{required:!0,message:e.name+"("+e.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:c(()=>[l.type==="int"?(n(),r(t,{key:0,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button",precision:0},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),l.type==="float"?(n(),r(t,{key:1,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button"},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),l.type==="string"?(n(),r(s,{key:2,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),l.type==="textarea"?(n(),r(_,{key:3,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),l.type==="bool"?(n(),r(h,{key:4,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,type:"round"},{checked:c(()=>[b("\u662F")]),unchecked:c(()=>[b("\u5426")]),_:2},1032,["modelValue","onUpdate:modelValue"])):d("",!0),l.type==="object"?(n(),r(C,{key:5,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1,"show-fullscreen":!0},null,8,["modelValue","onUpdate:modelValue"])):d("",!0)]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])):d("",!0)]),_:1},8,["visible","footer"])}}});export{K as _};
