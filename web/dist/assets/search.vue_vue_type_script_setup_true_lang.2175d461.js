import{i as I}from"./index.dcee45e5.js";import{d as V,e as _,b6 as E,b1 as g,b9 as R,aa as A,bh as N,bk as L,bE as U,aC as q,aJ as o,aZ as z,b_ as J,A as K,aK as e,u as r,aM as v,ba as M,aY as T}from"./arco.5cfe922d.js";import{S as Y}from"./search.f33d2c59.js";import{L as Z}from"./api.64a2d5f2.js";const Q=V({__name:"search",emits:["search","select"],setup(j,{emit:b}){const d=b,p=_(),a=_({}),m=_([]),c=new Y(m.value,async t=>{const s=[],{data:u}=await Z({...t,status:!0,name:t.query});return u.list.forEach(n=>{s.push({label:n.name,value:n.id})}),s},t=>a.value.serverId===t);c.Search();const w=()=>{a.value.keyword=void 0},C=t=>{d("select",t)},y=async()=>await p.value.validate()?!1:(d("search",a.value),!0);return(t,s)=>{const u=E,n=M,l=T,S=g,f=z,k=R,D=A,h=N,F=I,x=L,B=J("permission");return U((K(),q(f,null,{default:o(()=>[e(l,{flex:1},{default:o(()=>[e(k,{ref_key:"formRef",ref:p,model:r(a),"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left","auto-label-width":""},{default:o(()=>[e(f,{gutter:16},{default:o(()=>[e(l,{span:6},{default:o(()=>[e(n,{field:"serverId",label:"\u6240\u5C5E\u670D\u52A1"},{default:o(()=>[e(u,{modelValue:r(a).serverId,"onUpdate:modelValue":s[0]||(s[0]=i=>r(a).serverId=i),placeholder:"\u8BF7\u9009\u62E9\u670D\u52A1",scrollbar:!0,options:r(m),onSearch:r(c).Search,onDropdownReachBottom:r(c).NextSearch,onChange:C},null,8,["modelValue","options","onSearch","onDropdownReachBottom"])]),_:1})]),_:1}),e(l,{span:6},{default:o(()=>[e(n,{field:"keyword",label:"\u53D8\u91CF\u6807\u8BC6"},{default:o(()=>[e(S,{modelValue:r(a).keyword,"onUpdate:modelValue":s[1]||(s[1]=i=>r(a).keyword=i),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u6807\u8BC6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(l,{flex:"86px",style:{"text-align":"right"}},{default:o(()=>[e(x,{size:18},{default:o(()=>[e(h,{type:"primary",onClick:y},{icon:o(()=>[e(D)]),default:o(()=>[v(" \u641C\u7D22 ")]),_:1}),e(h,{onClick:w},{icon:o(()=>[e(F)]),default:o(()=>[v(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1})),[[B,"configure:business:query"]])}}});export{Q as _};
