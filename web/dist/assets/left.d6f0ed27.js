import{m as le,_ as ue}from"./index.dcee45e5.js";import{d as ie,e as u,b6 as ce,a$ as re,c1 as de,bV as pe,Q as ve,c2 as _e,B as p,E as s,aK as o,u as U,aN as i,aD as f,aM as v,aJ as l,aG as D,aH as me,bi as he,bj as Fe,aX as J,b_ as fe,A as c,bE as be,aO as ye,aL as ge,aC as j,c3 as Ce}from"./arco.5cfe922d.js";import{S as Ee}from"./search.f33d2c59.js";import{L as we}from"./api.64a2d5f2.js";import{S as De,L as ke,G as Ie}from"./api.a38eaf14.js";import Ae from"./compare.d1a9010b.js";import"./chart.903d1bcc.js";import"./vue.f8d3c6d1.js";/* empty css               *//* empty css              */const r=_=>(he("data-v-5285408c"),_=_(),Fe(),_),Se={class:"service"},Be=r(()=>s("div",{class:"hr"},[s("span",{class:"icon"}),s("span",{class:"title"},"\u670D\u52A1\u4FE1\u606F")],-1)),Te={class:"item"},Ve=r(()=>s("span",{class:"label"},"\u6240\u5C5E\u670D\u52A1",-1)),Le={class:"select-input"},xe={key:0},Ne={class:"item"},$e=r(()=>s("span",{class:"label"},"\u670D\u52A1\u540D\u79F0",-1)),Ge={class:"value"},Oe={class:"item"},ze=r(()=>s("span",{class:"label"},"\u670D\u52A1\u6807\u5FD7",-1)),Me={class:"value"},Re={key:1,class:"hr",style:{"margin-top":"20px","margin-bottom":"10px"}},Ue=r(()=>s("span",{class:"icon"},null,-1)),Je=r(()=>s("span",null,"\u6A21\u677F\u4FE1\u606F",-1)),je=[Ue,Je],He={key:2},Ke={class:"item"},Pe=r(()=>s("span",{class:"label"},"\u5F53\u524D\u7248\u672C",-1)),Qe={class:"value"},Xe={class:"item"},qe=r(()=>s("span",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),We={class:"value"},Ye={class:"item"},Ze=r(()=>s("span",{class:"label"},"\u7248\u672C\u63CF\u8FF0",-1)),es={class:"value"},ss={key:3,class:"empty-box"},ts={class:"pane-title"},as={class:"version"},os={class:"description"},ns={class:"version"},ls={class:"version"},us=["onClick"],is=ie({__name:"left",props:{template:{}},emits:["select","switch"],setup(_,{emit:H}){var B;const K=_,k=H,n=u({}),y=u([]),g=u(),m=u(!1),I=u([]),b=u((B=K.template)==null?void 0:B.id),h=u(!1),A=u([]),C=u({}),P=e=>{y.value.forEach(t=>{t.value===e&&(g.value=t)}),k("select",n.value.serverId)},E=new Ee(y.value,async e=>{const t=[],{data:w}=await we({...e,status:!0,name:e.query});return w.list.forEach(F=>{t.push({label:F.name,value:F.id,keyword:F.keyword})}),t},e=>n.value.serverId===e);E.Search();const S=async e=>{const{data:t}=await Ie(e);C.value=t},Q=async()=>{const{data:e}=await ke({page:1,pageSize:15,serverId:n.value.serverId});if(I.value=e.list,!e.list.length){D.error("\u6682\u65E0\u5386\u53F2\u6A21\u677F");return}m.value=!0,S(e.list[0].id)},X=async()=>{await De({serverId:n.value.serverId,id:b.value}),m.value=!1,D.success("\u6A21\u677F\u5207\u6362\u6210\u529F"),k("switch")},q=e=>{if(!e.compare){D.error("\u65E0\u53D8\u66F4\u4FE1\u606F");return}A.value=JSON.parse(e.compare),h.value=!0},W=e=>{b.value=e,S(b.value)};return(e,t)=>{var L,x,N,$,G,O,z,M;const w=ce,F=le,T=re,Y=J("svgIcon"),Z=de,ee=pe,se=ve,te=J("CodeEditor"),ae=Ce,oe=_e,V=me,ne=fe("permission");return c(),p("div",Se,[Be,s("div",Te,[Ve,s("div",Le,[o(w,{modelValue:n.value.serverId,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value.serverId=a),placeholder:"\u8BF7\u9009\u62E9\u670D\u52A1",scrollbar:!0,options:y.value,onSearch:U(E).Search,onDropdownReachBottom:U(E).NextSearch,onChange:P},null,8,["modelValue","options","onSearch","onDropdownReachBottom"])])]),n.value.serverId?(c(),p("div",xe,[s("div",Ne,[$e,s("span",Ge,i((L=g.value)==null?void 0:L.label),1)]),s("div",Oe,[ze,s("span",Me,i((x=g.value)==null?void 0:x.keyword),1)])])):f("",!0),n.value.serverId?(c(),p("div",Re,je)):f("",!0),(N=e.template)!=null&&N.id?(c(),p("div",He,[s("div",Ke,[Pe,s("span",Qe,[v(i(($=e.template)==null?void 0:$.version.substring(0,12))+" ",1),o(T,{content:"\u5207\u6362\u6A21\u677F\u7248\u672C",position:"top"},{default:l(()=>[be((c(),p("span",{class:"swap",onClick:Q},[o(F)])),[[ne,"configure:template:history"]])]),_:1})])]),s("div",Xe,[qe,s("span",We,i(e.$formatTime((G=e.template)==null?void 0:G.createdAt)),1)]),s("div",Ye,[Ze,s("span",es,i(e.template.description?e.template.description:"\u6682\u65E0\u63CF\u8FF0"),1)])])):f("",!0),!((O=e.template)!=null&&O.id)||!((z=n.value)!=null&&z.serverId)?(c(),p("div",ss,[o(Z,null,{image:l(()=>[o(Y,{name:"empty-box",size:120})]),default:l(()=>{var a;return[v(" "+i((a=n.value)!=null&&a.serverId?"\u6682\u65E0\u914D\u7F6E\u6570\u636E":"\u8BF7\u5148\u9009\u62E9\u670D\u52A1"),1)]}),_:1})])):f("",!0),o(V,{visible:m.value,"onUpdate:visible":t[1]||(t[1]=a=>m.value=a),title:"\u5207\u6362\u914D\u7F6E","ok-text":"\u786E\u8BA4\u5207\u6362","ok-button-props":{disabled:b.value==((M=e.template)==null?void 0:M.id)},width:"900px","body-style":{height:"500px",padding:"0"},"unmount-on-close":"",onCancel:t[2]||(t[2]=a=>m.value=!1),onBeforeOk:X},{default:l(()=>{var a;return[o(oe,{"default-active-key":(a=e.template)==null?void 0:a.id,direction:"vertical","destroy-on-hide":"",onChange:W},{default:l(()=>[(c(!0),p(ye,null,ge(I.value,d=>(c(),j(ae,{key:d.id},{title:l(()=>{var R;return[s("div",ts,[s("div",as,[v(" \u7248\u672C\u53F7\uFF1A"+i(d.version.substring(0,12))+" ",1),((R=e.template)==null?void 0:R.id)===d.id?(c(),j(ee,{key:0,size:"small",color:"arcoblue"},{default:l(()=>[v("\u4F7F\u7528\u4E2D")]),_:1})):f("",!0)]),o(T,{content:d.description},{default:l(()=>[s("div",os,"\u7248\u672C\u63CF\u8FF0\uFF1A"+i(d.description),1)]),_:2},1032,["content"]),s("div",ns,"\u63D0\u4EA4\u65F6\u95F4\uFF1A"+i(e.$formatTime(d.createdAt)),1),s("div",ls,[v(" \u53D8\u66F4\u8BE6\u60C5\uFF1A "),s("span",{class:"compare",onClick:cs=>q(d)},[v(" \u67E5\u770B "),o(se)],8,us)])])]}),default:l(()=>[o(te,{value:C.value.content,lang:C.value.format,"show-line":!1,"read-only":!0,style:{width:"100%",height:"500px"}},null,8,["value","lang"])]),_:2},1024))),128))]),_:1},8,["default-active-key"])]}),_:1},8,["visible","ok-button-props"]),o(V,{visible:h.value,"onUpdate:visible":t[3]||(t[3]=a=>h.value=a),title:"\u53D8\u66F4\u8BE6\u60C5",width:"900px","unmount-on-close":"","body-style":{height:"500px",padding:"0"},onCancel:t[4]||(t[4]=a=>h.value=!1),onBeforeOk:t[5]||(t[5]=a=>h.value=!1)},{default:l(()=>[o(Ae,{data:A.value},null,8,["data"])]),_:1},8,["visible"])])}}});const ys=ue(is,[["__scopeId","data-v-5285408c"]]);export{ys as default};
