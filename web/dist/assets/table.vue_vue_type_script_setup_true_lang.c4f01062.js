import"./index.dcee45e5.js";/* empty css               *//* empty css              */import{d as E,e as S,bV as A,bk as B,ae as $,ad as T,b0 as N,bS as P,b$ as V,aC as i,aJ as a,b_ as O,A as t,bE as m,aK as n,B as q,aL as I,aM as r,aN as _,aO as L,aD as M,aG as j}from"./arco.5cfe922d.js";import{D as G}from"./api.6c539ed8.js";const W=E({__name:"table",props:{columns:{},loading:{type:Boolean},data:{},size:{},pagination:{},total:{}},emits:["refresh","update","add","set","pageChange"],setup(J,{emit:h}){const c=h,s=S({page:1,pageSize:10}),C=e=>{s.value.page=e,c("pageChange",s.value)},v=e=>{s.value.pageSize=e,c("pageChange",s.value)},b=async e=>{await G({id:e}),j.success("\u5220\u9664\u6210\u529F"),c("refresh")},k=e=>{const u=e.split(",");return u.length>3?u.slice(0,3).concat(["..."]):u};return(e,u)=>{const l=A,d=B,f=$,z=T,D=N,y=P,F=V,g=O("permission");return t(),i(d,{direction:"vertical",fill:""},{default:a(()=>[m((t(),i(y,{"row-key":"id",loading:e.loading,columns:e.columns,pagination:!1,data:e.data,bordered:!1,size:e.size},{fields:a(({record:o})=>[n(d,null,{default:a(()=>[(t(!0),q(L,null,I(k(o.fields),(p,w)=>(t(),i(l,{key:w,color:"arcoblue"},{default:a(()=>[r(_(p),1)]),_:2},1024))),128))]),_:2},1024)]),createdAt:a(({record:o})=>[r(_(e.$formatTime(o.createdAt)),1)]),updatedAt:a(({record:o})=>[r(_(e.$formatTime(o.updatedAt)),1)]),operations:a(({record:o})=>[n(d,{class:"cursor-pointer"},{default:a(()=>[m((t(),i(l,{color:"arcoblue",onClick:p=>c("set",o)},{icon:a(()=>[n(f)]),default:a(()=>[r(" \u914D\u7F6E ")]),_:2},1032,["onClick"])),[[g,"configure:resource:value:query"]]),m((t(),i(l,{color:"orangered",onClick:p=>c("update",o)},{icon:a(()=>[n(f)]),default:a(()=>[r(" \u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[g,"configure:resource:update"]]),e.$hasPermission("configure:resource:delete")?(t(),i(D,{key:0,content:"\u60A8\u786E\u8BA4\u5220\u9664\u6B64\u8D44\u6E90\u53D8\u91CF\uFF1F",type:"warning",onOk:p=>b(o.id)},{default:a(()=>[n(l,{color:"red"},{icon:a(()=>[n(z)]),default:a(()=>[r(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onOk"])):M("",!0)]),_:2},1024)]),_:1},8,["loading","columns","data","size"])),[[g,"configure:resource:query"]]),n(F,{total:e.total,current:s.value.page,"page-size":s.value.pageSize,"show-total":"","show-jumper":"","show-page-size":"",onChange:C,onPageSizeChange:v},null,8,["total","current","page-size"])]),_:1})}}});export{W as _};
