import{x as F}from"./index.dcee45e5.js";/* empty css              */import{d as k,e as t,b9 as y,bH as B,aC as f,aJ as n,aG as D,A as i,aK as v,B as S,aL as V,aO as C,ba as I}from"./arco.5cfe922d.js";import{a as U,b as x}from"./api.6c539ed8.js";const G=k({__name:"value",props:{envs:{}},setup(m,{expose:p}){const d=t(),l=t(!1),c=t(0),w=m,_=t([]),s=t({});p({showUpdateDrawer:async o=>{c.value=o,s.value={};const{data:e}=await U({resourceId:o});_.value=e.list,e.list.forEach(r=>{s.value[String(r.envId)]=r.value}),l.value=!0},closeDrawer:()=>{l.value=!1}});const g=async()=>{if(await d.value.validate())return!1;const e=[];return w.envs.forEach(r=>{const u=s.value[String(r.id)];e.push({envId:r.id,value:String(u)})}),await x({resourceId:c.value,list:e}),D.success("\u8BBE\u7F6E\u6210\u529F"),!0};return(o,e)=>{const r=I,u=y,h=B;return i(),f(h,{visible:l.value,"onUpdate:visible":e[0]||(e[0]=a=>l.value=a),title:"\u8D44\u6E90\u503C\u914D\u7F6E",width:"380px",footer:o.$hasPermission("configure:resource:value:update"),onCancel:e[1]||(e[1]=a=>l.value=!1),onBeforeOk:g},{default:n(()=>[v(u,{ref_key:"formRef",ref:d,model:s.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:n(()=>[(i(!0),S(C,null,V(o.envs,(a,b)=>(i(),f(r,{key:b,field:String(a.id),label:a.name+"("+a.keyword+")",rules:[{required:!0,message:a.name+"("+a.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:n(()=>[v(F,{modelValue:s.value[String(a.id)],"onUpdate:modelValue":E=>s.value[String(a.id)]=E,style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1,"show-fullscreen":!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])]),_:1},8,["visible","footer"])}}});export{G as _};
