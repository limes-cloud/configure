import{i as k}from"./index.dcee45e5.js";import{d as E,e as i,b1 as g,b6 as x,b9 as I,aa as R,bh as A,bk as N,bE as U,aC as L,aJ as a,aZ as q,b_ as z,A as J,aK as e,u as t,aM as h,ba as K,aY as M}from"./arco.5cfe922d.js";import{L as T}from"./api.64a2d5f2.js";import{S as Y}from"./search.f33d2c59.js";const P=E({__name:"search",emits:["search","select"],setup(Z,{emit:w}){const b=w,_=i(),o=i({}),v=()=>{o.value.keyword=void 0},C=async()=>await _.value.validate()?!1:(b("search",o.value),!0),p=i([]),d=new Y(p.value,async l=>{const r=[],{data:c}=await T({...l,status:!0,name:l.query});return c.list.forEach(n=>{r.push({label:n.name,value:n.id})}),r},l=>o.value.serverId===l);return d.Search(),(l,r)=>{const c=g,n=K,s=M,F=x,m=q,y=I,D=R,f=A,B=k,S=N,V=z("permission");return U((J(),L(m,null,{default:a(()=>[e(s,{flex:1},{default:a(()=>[e(y,{ref_key:"formRef",ref:_,model:t(o),"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left","auto-label-width":""},{default:a(()=>[e(m,{gutter:16},{default:a(()=>[e(s,{span:6},{default:a(()=>[e(n,{field:"keyword",label:"\u53D8\u91CF\u6807\u8BC6"},{default:a(()=>[e(c,{modelValue:t(o).keyword,"onUpdate:modelValue":r[0]||(r[0]=u=>t(o).keyword=u),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u6807\u8BC6"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(n,{field:"tag",label:"\u53D8\u91CF\u6807\u7B7E"},{default:a(()=>[e(c,{modelValue:t(o).tag,"onUpdate:modelValue":r[1]||(r[1]=u=>t(o).tag=u),"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u6807\u7B7E"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:6},{default:a(()=>[e(n,{field:"tag",label:"\u6240\u5C5E\u670D\u52A1"},{default:a(()=>[e(F,{modelValue:t(o).serverId,"onUpdate:modelValue":r[2]||(r[2]=u=>t(o).serverId=u),placeholder:"\u8BF7\u9009\u62E9\u53D8\u91CF\u6240\u5C5E\u670D\u52A1",scrollbar:!0,options:t(p),"allow-search":"",onSearch:t(d).Search,onDropdownReachBottom:t(d).NextSearch},null,8,["modelValue","options","onSearch","onDropdownReachBottom"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(s,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(S,{size:18},{default:a(()=>[e(f,{type:"primary",onClick:C},{icon:a(()=>[e(D)]),default:a(()=>[h(" \u641C\u7D22 ")]),_:1}),e(f,{onClick:v},{icon:a(()=>[e(B)]),default:a(()=>[h(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1})),[[V,"configure:resource:query"]])}}});export{P as _};
