import{n as y}from"./index.93ba0c34.js";/* empty css              *//* empty css               */import{d as V,e as a,bp as $,B as G,aJ as o,aI as L,A as J,aP as i,aQ as M}from"./arco.9b5dfa89.js";import{p as P,a as Q,u as j,d as q}from"./business.13b61aa7.js";import{u as H}from"./loading.eb6d651b.js";import{a as K}from"./env.bd786fc1.js";import O from"./tool.c2977585.js";import{_ as W}from"./table.vue_vue_type_script_setup_true_lang.b418dfb6.js";import{_ as X}from"./form.vue_vue_type_script_setup_true_lang.4597500b.js";import{_ as Y}from"./search.vue_vue_type_script_setup_true_lang.20a37d65.js";import{_ as Z}from"./value.vue_vue_type_script_setup_true_lang.f26ef8ab.js";import"./chart.a7f56037.js";import"./vue.b2201ea8.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./lodash.38496856.js";import"./sortable.esm.41bdaeb5.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css               */import"./type.a4a3f801.js";/* empty css              *//* empty css               *//* empty css                */import"./server.72844b0b.js";import"./index.2ea1f45a.js";function ee(l){return y.get("/configure/v1/business/values",{params:{business_id:l}})}function ae(l,n){return y.put("/configure/v1/business/value",{business_id:l,list:n})}const te={class:"container"},se={name:"ConfigureBusiness"},Te=V({...se,setup(l){const n=a(),v=a(),r=a({}),{setLoading:_}=H(!0),B=a(!1),f=a(),w=a(),d=a("medium"),g=a(0),F=a([]),h=a([]),c=a({type:""}),s=a({page:1,page_size:10,server_id:0}),p=a([{title:"\u53D8\u91CF\u6807\u5FD7",dataIndex:"keyword",slotName:"keyword"},{title:"\u53D8\u91CF\u7C7B\u578B",dataIndex:"type",slotName:"type"},{title:"\u53D8\u91CF\u63CF\u8FF0",dataIndex:"description",slotName:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",slotName:"createdAt"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updatedAt"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations"}]),b=async()=>{const{data:e}=await K();F.value=e},A=async e=>{const{data:t}=await ee(e);h.value=t},u=async()=>{_(!0);try{const{data:e}=await P(s.value);f.value=e.list,g.value=e.total}finally{_(!1)}};b();const D=async e=>{await Q(e),u(),i.success("\u521B\u5EFA\u6210\u529F")},z=async e=>{await j(e),u(),i.success("\u66F4\u65B0\u6210\u529F")},C=async e=>{await q(e),u(),i.success("\u5220\u9664\u6210\u529F")},x=async e=>{const t=s.value.page_size;s.value={...e,page:1,page_size:t},u()},U=async e=>{var t;await ae((t=c.value)==null?void 0:t.id,e),i.success("\u914D\u7F6E\u6210\u529F")},S=()=>{r.value={server_id:s.value.server_id},n.value.showAddDrawer()},I=e=>{r.value={...e},n.value.showUpdateDrawer()},N=e=>{r.value={},n.value.showAddDrawer()},k=e=>{c.value=e,A(e.id),v.value.showUpdateDrawer()},E=e=>{s.value.server_id=e,u()};return(e,t)=>{const R=M("Breadcrumb"),T=$;return J(),G("div",te,[o(R),o(T,{class:"general-card"},{default:L(()=>[o(Y,{onSearch:x,onSelect:E}),o(O,{size:d.value,"onUpdate:size":t[0]||(t[0]=m=>d.value=m),columns:p.value,"onUpdate:columns":t[1]||(t[1]=m=>p.value=m),"enable-create":!!s.value.server_id,onRefresh:u,onAdd:S},null,8,["size","columns","enable-create"]),o(W,{columns:p.value,loading:B.value,data:f.value,size:d.value,total:g.value,pagination:{current:s.value.page,pageSize:s.value.page_size},onAdd:N,onUpdate:I,onDelete:C,onSet:k},null,8,["columns","loading","data","size","total","pagination"]),o(X,{ref_key:"formRef",ref:n,data:r.value,servers:w.value,onAdd:D,onUpdate:z},null,8,["data","servers"]),o(Z,{ref_key:"valueRef",ref:v,type:c.value.type,values:h.value,envs:F.value,onUpdate:U},null,8,["type","values","envs"])]),_:1})])}}});export{Te as default};
