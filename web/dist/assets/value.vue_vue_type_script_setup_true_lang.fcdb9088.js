import{C as F}from"./index.ddbbfbf8.js";/* empty css              */import{d as k,e as t,b9 as y,bH as B,aC as f,aJ as n,aG as C,A as i,aK as v,B as D,aL as S,aO as V,ba as I}from"./arco.b1c3a1f5.js";import{a as U,b as x}from"./api.09b56d55.js";const G=k({__name:"value",props:{envs:{}},setup(m,{expose:p}){const d=t(),l=t(!1),c=t(0),w=m,g=t([]),o=t({});p({showUpdateDrawer:async s=>{c.value=s,o.value={};const{data:e}=await U({resourceId:s});g.value=e.list,e.list.forEach(r=>{o.value[String(r.envId)]=r.value}),l.value=!0},closeDrawer:()=>{l.value=!1}});const _=async()=>{if(await d.value.validate())return!1;const e=[];return w.envs.forEach(r=>{const u=o.value[String(r.id)];e.push({envId:r.id,value:String(u)})}),await x({resourceId:c.value,list:e}),C.success("\u8BBE\u7F6E\u6210\u529F"),!0};return(s,e)=>{const r=I,u=y,b=B;return i(),f(b,{visible:l.value,"onUpdate:visible":e[0]||(e[0]=a=>l.value=a),title:"\u8D44\u6E90\u503C\u914D\u7F6E",width:"380px",footer:s.$hasPermission("configure:resource:value:update"),onCancel:e[1]||(e[1]=a=>l.value=!1),onBeforeOk:_},{default:n(()=>[v(u,{ref_key:"formRef",ref:d,model:o.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:n(()=>[(i(!0),D(V,null,S(s.envs,(a,h)=>(i(),f(r,{key:h,field:String(a.id),label:a.name+"("+a.keyword+")",rules:[{required:!0,message:a.name+"("+a.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:n(()=>[v(F,{modelValue:o.value[String(a.id)],"onUpdate:modelValue":E=>o.value[String(a.id)]=E,style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])]),_:1},8,["visible","footer"])}}});export{G as _};
