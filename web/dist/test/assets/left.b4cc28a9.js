import{d as ee,E as _,a5 as se,aU as te,Y as ae,m as oe,b6 as ne,b7 as le,aP as ue,b8 as ie,b9 as ce,e as v,f as e,g as n,t as d,l as b,h as m,w as c,M as O,a$ as de,r as re,s as pe,o as r,ac as _e,a2 as ve,a3 as me,k as P,ab as he,ba as fe,aN as Fe,_ as be}from"./index.e1248d42.js";/* empty css               */import{p as ge}from"./server.c206e384.js";import{s as ye,d as Ce}from"./template.0c2616e6.js";import Ee from"./compare.d5ab8a9b.js";/* empty css               *//* empty css               *//* empty css              *//* empty css                */const p=t=>(re("data-v-d4919846"),t=t(),pe(),t),ke={class:"service"},we=p(()=>e("div",{class:"hr"},[e("span",{class:"icon"}),e("span",{class:"title"},"\u670D\u52A1\u4FE1\u606F")],-1)),De={class:"item"},Ae=p(()=>e("span",{class:"label"},"\u6240\u5C5E\u670D\u52A1",-1)),xe={class:"select-input"},Be={key:0},Te={class:"item"},Se=p(()=>e("span",{class:"label"},"\u670D\u52A1\u540D\u79F0",-1)),Ie={class:"value"},Ve={class:"item"},$e=p(()=>e("span",{class:"label"},"\u670D\u52A1\u6807\u5FD7",-1)),Ne={class:"value"},Me={key:1,class:"hr",style:{"margin-top":"20px","margin-bottom":"10px"}},Ue=p(()=>e("span",{class:"icon"},null,-1)),ze=p(()=>e("span",null,"\u6A21\u677F\u4FE1\u606F",-1)),Le=[Ue,ze],Oe={key:2},Pe={class:"item"},Je=p(()=>e("span",{class:"label"},"\u5F53\u524D\u7248\u672C",-1)),Re={class:"value"},Ye={class:"item"},je=p(()=>e("span",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),qe={class:"value"},Ge={class:"item"},He=p(()=>e("span",{class:"label"},"\u7248\u672C\u63CF\u8FF0",-1)),Ke={class:"value"},Qe={key:3,class:"empty"},We={class:"pane-title"},Xe={class:"version"},Ze={class:"description"},es={class:"version"},ss={class:"version"},ts=["onClick"],as=ee({__name:"left",props:{template:null},emits:["select","switch"],setup(t,{emit:w}){var B;const J=t,u=_({}),g=_([]),E=_(),h=_(!1),D=_([]),k=_((B=J.template)==null?void 0:B.id),f=_(!1),A=_([]),x=async o=>{const{data:s}=await ge({page:1,page_size:10,keyword:o}),{list:y}=s;if(!y)return;const C=[];y.forEach(i=>{u.value.server_id!==i.id&&(i.fullName=`${i.name}(${i.keyword})`,C.push(i))});const F=[];g.value.forEach(i=>{i.id===u.value.server_id&&F.push(i)}),g.value=C.concat(F)},R=o=>{g.value.forEach(s=>{s.id===o&&(E.value=s)}),w("select",o)},Y=async()=>{const{data:o}=await Ce({page:1,page_size:15,server_id:u.value.server_id});D.value=o.list,h.value=!0},j=async()=>{await ye({server_id:u.value.server_id,id:k.value}),h.value=!1,O.success("\u6A21\u677F\u5207\u6362\u6210\u529F"),w("switch")},q=o=>{if(!o.compare){O.error("\u65E0\u53D8\u66F4\u4FE1\u606F");return}A.value=JSON.parse(o.compare),f.value=!0};return se(()=>{x()}),(o,s)=>{var S,I,V,$,N,M,U,z;const y=te,C=ae,F=oe,i=ne,G=le,H=ue,K=ie,Q=he("CodeEditor"),W=fe,X=ce,T=de,Z=Fe("permission");return r(),v("div",ke,[we,e("div",De,[Ae,e("div",xe,[n(y,{modelValue:u.value.server_id,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value.server_id=a),placeholder:"\u8BF7\u9009\u62E9\u670D\u52A1",scrollbar:!0,options:g.value,"field-names":{value:"id",label:"fullName"},onSearch:x,onChange:R},null,8,["modelValue","options"])])]),u.value.server_id?(r(),v("div",Be,[e("div",Te,[Se,e("span",Ie,d((S=E.value)==null?void 0:S.name),1)]),e("div",Ve,[$e,e("span",Ne,d((I=E.value)==null?void 0:I.keyword),1)])])):b("",!0),u.value.server_id?(r(),v("div",Me,Le)):b("",!0),(V=t.template)!=null&&V.id?(r(),v("div",Oe,[e("div",Pe,[Je,e("span",Re,[m(d(($=t.template)==null?void 0:$.version)+" ",1),n(F,{content:"\u5207\u6362\u6A21\u677F\u7248\u672C",position:"top"},{default:c(()=>[_e((r(),v("span",{class:"swap",onClick:Y},[n(C)])),[[Z,"configure:template:history"]])]),_:1})])]),e("div",Ye,[je,e("span",qe,d(o.$formatTime((N=t.template)==null?void 0:N.created_at)),1)]),e("div",Ge,[He,e("span",Ke,d(t.template.description?t.template.description:"\u6682\u65E0\u63CF\u8FF0"),1)])])):b("",!0),!((M=t.template)!=null&&M.id)||!((U=u.value)!=null&&U.server_id)?(r(),v("div",Qe,[n(G,null,{image:c(()=>[n(i)]),default:c(()=>{var a;return[m(" "+d((a=u.value)!=null&&a.server_id?"\u6682\u65E0\u914D\u7F6E\u6570\u636E":"\u8BF7\u5148\u9009\u62E9\u670D\u52A1"),1)]}),_:1})])):b("",!0),n(T,{visible:h.value,"onUpdate:visible":s[2]||(s[2]=a=>h.value=a),title:"\u5207\u6362\u914D\u7F6E","ok-text":"\u786E\u8BA4\u5207\u6362","ok-button-props":{disabled:k.value==((z=t.template)==null?void 0:z.id)},width:"900px","body-style":{height:"500px",padding:"0"},"unmount-on-close":"",onCancel:s[3]||(s[3]=a=>h.value=!1),onBeforeOk:j},{default:c(()=>{var a;return[n(X,{"default-active-key":(a=t.template)==null?void 0:a.id,direction:"vertical","destroy-on-hide":"",onChange:s[1]||(s[1]=l=>{k.value=l})},{default:c(()=>[(r(!0),v(ve,null,me(D.value,l=>(r(),P(W,{key:l.id},{title:c(()=>{var L;return[e("div",We,[e("div",Xe,[m(" \u7248\u672C\u53F7\uFF1A"+d(l.version)+" ",1),((L=t.template)==null?void 0:L.id)===l.id?(r(),P(H,{key:0,size:"small",color:"arcoblue"},{default:c(()=>[m("\u4F7F\u7528\u4E2D")]),_:1})):b("",!0)]),n(F,{content:l.description},{default:c(()=>[e("div",Ze,"\u7248\u672C\u63CF\u8FF0\uFF1A"+d(l.description),1)]),_:2},1032,["content"]),e("div",es,"\u63D0\u4EA4\u65F6\u95F4\uFF1A"+d(o.$formatTime(l.created_at)),1),e("div",ss,[m(" \u53D8\u66F4\u8BE6\u60C5\uFF1A "),e("span",{class:"compare",onClick:os=>q(l)},[m(" \u67E5\u770B "),n(K)],8,ts)])])]}),default:c(()=>[n(Q,{value:l.content,lang:l.format,"show-line":!1,"read-only":!0,style:{width:"100%",height:"500px"}},null,8,["value","lang"])]),_:2},1024))),128))]),_:1},8,["default-active-key"])]}),_:1},8,["visible","ok-button-props"]),n(T,{visible:f.value,"onUpdate:visible":s[4]||(s[4]=a=>f.value=a),title:"\u53D8\u66F4\u8BE6\u60C5",width:"900px","unmount-on-close":"","body-style":{height:"500px",padding:"0"},onCancel:s[5]||(s[5]=a=>f.value=!1),onBeforeOk:s[6]||(s[6]=a=>f.value=!1)},{default:c(()=>[n(Ee,{data:A.value},null,8,["data"])]),_:1},8,["visible"])])}}});const vs=be(as,[["__scopeId","data-v-d4919846"]]);export{vs as default};
