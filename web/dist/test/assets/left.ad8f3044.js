import{d as Z,E as p,a5 as ee,aS as se,Y as te,m as ae,b5 as oe,b6 as ne,aN as le,b7 as ue,b8 as ie,e as v,f as e,g as l,t as d,l as b,h as m,w as c,M as U,a_ as ce,r as de,s as re,o as _,a2 as pe,a3 as _e,k as J,ab as ve,b9 as me,_ as he}from"./index.1e297ea4.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{p as fe}from"./server.74c345f5.js";import{s as Fe,d as be}from"./template.e9e7befa.js";import ge from"./compare.68a56b83.js";/* empty css               *//* empty css                *//* empty css              *//* empty css                */const r=a=>(de("data-v-5f47eb64"),a=a(),re(),a),ye={class:"service"},Ce=r(()=>e("div",{class:"hr"},[e("span",{class:"icon"}),e("span",{class:"title"},"\u670D\u52A1\u4FE1\u606F")],-1)),Ee={class:"item"},ke=r(()=>e("span",{class:"label"},"\u6240\u5C5E\u670D\u52A1",-1)),we={class:"select-input"},De={key:0},Ae={class:"item"},xe=r(()=>e("span",{class:"label"},"\u670D\u52A1\u540D\u79F0",-1)),Be={class:"value"},Se={class:"item"},Te=r(()=>e("span",{class:"label"},"\u670D\u52A1\u6807\u5FD7",-1)),Ie={class:"value"},Ve={key:1,class:"hr",style:{"margin-top":"20px","margin-bottom":"10px"}},Ne=r(()=>e("span",{class:"icon"},null,-1)),$e=r(()=>e("span",null,"\u6A21\u677F\u4FE1\u606F",-1)),Me=[Ne,$e],ze={key:2},Le={class:"item"},Oe=r(()=>e("span",{class:"label"},"\u5F53\u524D\u7248\u672C",-1)),Ue={class:"value"},Je={class:"item"},Pe=r(()=>e("span",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),Re={class:"value"},Ye={class:"item"},je=r(()=>e("span",{class:"label"},"\u7248\u672C\u63CF\u8FF0",-1)),qe={class:"value"},Ge={key:3,class:"empty"},He={class:"pane-title"},Ke={class:"version"},Qe={class:"description"},We={class:"version"},Xe={class:"version"},Ze=["onClick"],es=Z({__name:"left",props:{template:null},emits:["select","switch"],setup(a,{emit:w}){var B;const P=a,u=p({}),g=p([]),E=p(),h=p(!1),D=p([]),k=p((B=P.template)==null?void 0:B.id),f=p(!1),A=p([]),x=async n=>{const{data:s}=await fe({page:1,page_size:10,keyword:n}),{list:y}=s;if(!y)return;const C=[];y.forEach(i=>{u.value.server_id!==i.id&&(i.fullName=`${i.name}(${i.keyword})`,C.push(i))});const F=[];g.value.forEach(i=>{i.id===u.value.server_id&&F.push(i)}),g.value=C.concat(F)},R=n=>{g.value.forEach(s=>{s.id===n&&(E.value=s)}),w("select",n)},Y=async()=>{const{data:n}=await be({page:1,page_size:15,server_id:u.value.server_id});D.value=n.list,h.value=!0},j=async()=>{await Fe({server_id:u.value.server_id,id:k.value}),h.value=!1,U.success("\u6A21\u677F\u5207\u6362\u6210\u529F"),w("switch")},q=n=>{if(!n.compare){U.error("\u65E0\u53D8\u66F4\u4FE1\u606F");return}A.value=JSON.parse(n.compare),f.value=!0};return ee(()=>{x()}),(n,s)=>{var T,I,V,N,$,M,z,L;const y=se,C=te,F=ae,i=oe,G=ne,H=le,K=ue,Q=ve("CodeEditor"),W=me,X=ie,S=ce;return _(),v("div",ye,[Ce,e("div",Ee,[ke,e("div",we,[l(y,{modelValue:u.value.server_id,"onUpdate:modelValue":s[0]||(s[0]=o=>u.value.server_id=o),placeholder:"\u8BF7\u9009\u62E9\u670D\u52A1",scrollbar:!0,options:g.value,"field-names":{value:"id",label:"fullName"},onSearch:x,onChange:R},null,8,["modelValue","options"])])]),u.value.server_id?(_(),v("div",De,[e("div",Ae,[xe,e("span",Be,d((T=E.value)==null?void 0:T.name),1)]),e("div",Se,[Te,e("span",Ie,d((I=E.value)==null?void 0:I.keyword),1)])])):b("",!0),u.value.server_id?(_(),v("div",Ve,Me)):b("",!0),(V=a.template)!=null&&V.id?(_(),v("div",ze,[e("div",Le,[Oe,e("span",Ue,[m(d((N=a.template)==null?void 0:N.version)+" ",1),l(F,{content:"\u5207\u6362\u6A21\u677F\u7248\u672C",position:"top"},{default:c(()=>[e("span",{class:"swap",onClick:Y},[l(C)])]),_:1})])]),e("div",Je,[Pe,e("span",Re,d(n.$formatTime(($=a.template)==null?void 0:$.created_at)),1)]),e("div",Ye,[je,e("span",qe,d(a.template.description?a.template.description:"\u6682\u65E0\u63CF\u8FF0"),1)])])):b("",!0),!((M=a.template)!=null&&M.id)||!((z=u.value)!=null&&z.server_id)?(_(),v("div",Ge,[l(G,null,{image:c(()=>[l(i)]),default:c(()=>{var o;return[m(" "+d((o=u.value)!=null&&o.server_id?"\u6682\u65E0\u914D\u7F6E\u6570\u636E":"\u8BF7\u5148\u9009\u62E9\u670D\u52A1"),1)]}),_:1})])):b("",!0),l(S,{visible:h.value,"onUpdate:visible":s[2]||(s[2]=o=>h.value=o),title:"\u5207\u6362\u914D\u7F6E","ok-text":"\u786E\u8BA4\u5207\u6362","ok-button-props":{disabled:k.value==((L=a.template)==null?void 0:L.id)},width:"900px","body-style":{height:"500px",padding:"0"},"unmount-on-close":"",onCancel:s[3]||(s[3]=o=>h.value=!1),onBeforeOk:j},{default:c(()=>{var o;return[l(X,{"default-active-key":(o=a.template)==null?void 0:o.id,direction:"vertical","destroy-on-hide":"",onChange:s[1]||(s[1]=t=>{k.value=t})},{default:c(()=>[(_(!0),v(pe,null,_e(D.value,t=>(_(),J(W,{key:t.id},{title:c(()=>{var O;return[e("div",He,[e("div",Ke,[m(" \u7248\u672C\u53F7\uFF1A"+d(t.version)+" ",1),((O=a.template)==null?void 0:O.id)===t.id?(_(),J(H,{key:0,size:"small",color:"arcoblue"},{default:c(()=>[m("\u4F7F\u7528\u4E2D")]),_:1})):b("",!0)]),l(F,{content:t.description},{default:c(()=>[e("div",Qe,"\u7248\u672C\u63CF\u8FF0\uFF1A"+d(t.description),1)]),_:2},1032,["content"]),e("div",We,"\u63D0\u4EA4\u65F6\u95F4\uFF1A"+d(n.$formatTime(t.created_at)),1),e("div",Xe,[m(" \u53D8\u66F4\u8BE6\u60C5\uFF1A "),e("span",{class:"compare",onClick:ss=>q(t)},[m(" \u67E5\u770B "),l(K)],8,Ze)])])]}),default:c(()=>[l(Q,{value:t==null?void 0:t.content,lang:t==null?void 0:t.format,"show-line":!1,"read-only":!0,style:{width:"100%",height:"500px"}},null,8,["value","lang"])]),_:2},1024))),128))]),_:1},8,["default-active-key"])]}),_:1},8,["visible","ok-button-props"]),l(S,{visible:f.value,"onUpdate:visible":s[4]||(s[4]=o=>f.value=o),title:"\u53D8\u66F4\u8BE6\u60C5",width:"900px","unmount-on-close":"","body-style":{height:"500px",padding:"0"},onCancel:s[5]||(s[5]=o=>f.value=!1),onBeforeOk:s[6]||(s[6]=o=>f.value=!1)},{default:c(()=>[l(ge,{data:A.value},null,8,["data"])]),_:1},8,["visible"])])}}});const ms=he(es,[["__scopeId","data-v-5f47eb64"]]);export{ms as default};
