import{d as D,E as p,$ as x,aW as B,aw as E,aT as N,aX as I,az as T,af as $,k as r,w as v,o,e as O,a3 as R,l as d,h as g,a2 as j,aA as q}from"./index.16e62b85.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{C as z}from"./index.491d0914.js";const P=D({__name:"value",props:{type:null,values:null,envs:null},emits:["update"],setup(n,{expose:w,emit:V}){const s=n,f=p(),i=p(!1),y=p({}),a=p({});x(()=>s.values,c=>{a.value={},c.forEach(l=>{let t=l.value;(s.type==="int"||s.type==="float")&&(t=JSON.parse(l.value)),s.type==="bool"&&(t=l.value==="true"),a.value[String(l.environment_id)]=t}),y.value={...a.value}}),w({showUpdateDrawer:()=>{i.value=!0},closeDrawer:()=>{i.value=!1}});const h=async()=>{const c=await f.value.validate();if(console.log(c),c)return!1;const l=[];return s.envs.forEach(t=>{const m=a.value[String(t.id)];l.push({env_keyword:t.keyword,environment_id:t.id,value:String(m)})}),V("update",[...l]),!0};return(c,l)=>{const t=B,m=E,F=N,k=I,S=q,C=T,b=$;return o(),r(b,{visible:i.value,"onUpdate:visible":l[1]||(l[1]=e=>i.value=e),title:"\u8D44\u6E90\u503C\u914D\u7F6E",width:"380px",onCancel:l[2]||(l[2]=e=>i.value=!1),onBeforeOk:h},{default:v(()=>[n.type?(o(),r(C,{key:0,ref_key:"formRef",ref:f,model:a.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:v(()=>[(o(!0),O(j,null,R(n.envs,(e,_)=>(o(),r(S,{key:_,field:String(e.id),label:e.name+"("+e.keyword+")",rules:[{required:!0,message:e.name+"("+e.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:v(()=>[n.type==="int"?(o(),r(t,{key:0,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button",precision:0},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="float"?(o(),r(t,{key:1,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button"},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="string"?(o(),r(m,{key:2,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="textarea"?(o(),r(F,{key:3,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="bool"?(o(),r(k,{key:4,modelValue:a.value[String(e.id)],"onUpdate:modelValue":u=>a.value[String(e.id)]=u,type:"round"},{checked:v(()=>[g(" \u662F ")]),unchecked:v(()=>[g(" \u5426 ")]),_:2},1032,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="object"?(o(),r(z,{key:5,id:String(e.id),value:y.value[String(e.id)],style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1,onChange:l[0]||(l[0]=(u,U)=>{a.value[U]=u})},null,8,["id","value"])):d("",!0)]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])):d("",!0)]),_:1},8,["visible"])}}});export{P as _};
