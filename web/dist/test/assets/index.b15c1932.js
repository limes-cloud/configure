import{d as S,E as a,aF as B,e as C,g as n,w as N,o as b,M as c,ab as I}from"./index.b4c32530.js";/* empty css              *//* empty css               */import{p as U,a as k,u as E,d as T}from"./server.c484d62d.js";import{u as M}from"./loading.1cfe06b8.js";import R from"./tool.7986b382.js";import{_ as $}from"./table.vue_vue_type_script_setup_true_lang.5ac08bc4.js";import{_ as L}from"./form.vue_vue_type_script_setup_true_lang.9bc7c60b.js";import{_ as P}from"./search.vue_vue_type_script_setup_true_lang.0a8926dc.js";/* empty css               *//* empty css              *//* empty css               */import"./lodash.56658418.js";import"./sortable.esm.41bdaeb5.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                */const G={class:"container"},V={name:"ManagerServer"},ce=S({...V,setup(j){const u=a(),l=a({}),{setLoading:m}=M(!0),_=a(!1),p=a(),r=a("medium"),v=a(0),t=a({page:1,page_size:10}),d=a([{title:"\u670D\u52A1\u6807\u5FD7",dataIndex:"keyword",slotName:"keyword"},{title:"\u670D\u52A1\u540D\u79F0",dataIndex:"name",slotName:"name"},{title:"\u662F\u5426\u4E1A\u52A1\u670D\u52A1",dataIndex:"is_business",slotName:"isBusiness"},{title:"\u670D\u52A1\u63CF\u8FF0",dataIndex:"description",slotName:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",slotName:"createdAt"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updatedAt"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations"}]),o=async()=>{m(!0);try{const{data:e}=await U(t.value);p.value=e.list,v.value=e.total}finally{m(!1)}};o();const f=async e=>{await k(e),o(),c.success("\u521B\u5EFA\u6210\u529F")},g=async e=>{await E(e),o(),c.success("\u66F4\u65B0\u6210\u529F")},F=async e=>{await T(e),o(),c.success("\u5220\u9664\u6210\u529F")},A=async e=>{const s=t.value.page_size;t.value={...e,page:1,page_size:s},o()},h=()=>{l.value={},u.value.showAddDrawer()},w=e=>{l.value={...e},u.value.showUpdateDrawer()},z=e=>{l.value={},u.value.showAddDrawer()},D=async e=>{t.value.page=e.current,t.value.page_size=e.pageSize,o()};return(e,s)=>{const y=I("Breadcrumb"),x=B;return b(),C("div",G,[n(y),n(x,{class:"general-card"},{default:N(()=>[n(P,{onSearch:A}),n(R,{size:r.value,"onUpdate:size":s[0]||(s[0]=i=>r.value=i),columns:d.value,"onUpdate:columns":s[1]||(s[1]=i=>d.value=i),onRefresh:o,onAdd:h},null,8,["size","columns"]),n($,{columns:d.value,loading:_.value,data:p.value,size:r.value,total:v.value,pagination:{current:t.value.page,pageSize:t.value.page_size},onPageChange:D,onAdd:z,onUpdate:w,onDelete:F},null,8,["columns","loading","data","size","total","pagination"]),n(L,{ref_key:"formRef",ref:u,data:l.value,onAdd:f,onUpdate:g},null,8,["data"])]),_:1})])}}});export{ce as default};
