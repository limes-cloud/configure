import{d as F,E as u,$ as y,az as b,af as k,k as v,w as n,M as C,o as i,g as m,e as D,a3 as B,a_ as S,a2 as x,aA as N}from"./index.b4c32530.js";/* empty css              *//* empty css               *//* empty css               */const $=F({__name:"value",props:{values:null,envs:null},emits:["update"],setup(d,{expose:p,emit:w}){const f=d,c=u(),l=u(!1),r=u({});y(()=>f.values,o=>{!o||(r.value={},o.forEach(e=>{r.value[e.env_id]=e.value}))}),p({showUpdateDrawer:()=>{l.value=!0},closeDrawer:()=>{l.value=!1}});const _=async()=>{if(await c.value.validate())return!1;const e=[];try{f.envs.forEach(t=>{const s=JSON.stringify(JSON.parse(r.value[t.id]));e.push({env_id:t.id,value:JSON.stringify(JSON.parse(s))})})}catch{return C.error("\u6570\u636E\u683C\u5F0F\u5B58\u5728\u9519\u8BEF"),!1}return w("update",[...e]),!0};return(o,e)=>{const t=N,s=b,h=k;return i(),v(h,{visible:l.value,"onUpdate:visible":e[0]||(e[0]=a=>l.value=a),title:"\u53D8\u91CF\u503C\u914D\u7F6E",width:"380px","unmount-on-close":"",onCancel:e[1]||(e[1]=a=>l.value=!1),onBeforeOk:_},{default:n(()=>[m(s,{ref_key:"formRef",ref:c,model:r.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:n(()=>[(i(!0),D(x,null,B(d.envs,(a,g)=>(i(),v(t,{key:g,field:String(a.id),label:a.name+"("+a.keyword+")",rules:[{required:!0,message:a.name+"("+a.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:n(()=>[m(S,{modelValue:r.value[a.id],"onUpdate:modelValue":E=>r.value[a.id]=E,style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])]),_:1},8,["visible"])}}});export{$ as _};
