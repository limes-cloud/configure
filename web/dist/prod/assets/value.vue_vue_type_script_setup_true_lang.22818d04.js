import{C as F}from"./index.9de08a74.js";/* empty css              *//* empty css               *//* empty css               */import{d as y,e as u,w as C,bo as E,bh as k,aC as v,aI as n,aR as B,A as i,aJ as m,B as D,aK as N,aN as S,bp as x}from"./arco.79b3a20c.js";const A=y({__name:"value",props:{values:null,envs:null},emits:["update"],setup(d,{expose:p,emit:w}){const f=d,c=u(),l=u(!1),r=u({});C(()=>f.values,t=>{!t||(r.value={},t.forEach(e=>{r.value[e.env_id]=e.value}))}),p({showUpdateDrawer:()=>{l.value=!0},closeDrawer:()=>{l.value=!1}});const _=async()=>{if(await c.value.validate())return!1;const e=[];try{f.envs.forEach(o=>{const s=JSON.stringify(JSON.parse(r.value[o.id]));e.push({env_id:o.id,value:JSON.stringify(JSON.parse(s))})})}catch{return B.error("\u6570\u636E\u683C\u5F0F\u5B58\u5728\u9519\u8BEF"),!1}return w("update",[...e]),!0};return(t,e)=>{const o=x,s=E,h=k;return i(),v(h,{visible:l.value,"onUpdate:visible":e[0]||(e[0]=a=>l.value=a),title:"\u53D8\u91CF\u503C\u914D\u7F6E",width:"380px","unmount-on-close":"",onCancel:e[1]||(e[1]=a=>l.value=!1),onBeforeOk:_},{default:n(()=>[m(s,{ref_key:"formRef",ref:c,model:r.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:n(()=>[(i(!0),D(S,null,N(d.envs,(a,b)=>(i(),v(o,{key:b,field:String(a.id),label:a.name+"("+a.keyword+")",rules:[{required:!0,message:a.name+"("+a.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:n(()=>[m(F,{modelValue:r.value[a.id],"onUpdate:modelValue":g=>r.value[a.id]=g,style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])]),_:1},8,["visible"])}}});export{A as _};
