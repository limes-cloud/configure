import"./index.61b249da.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as U,e as v,w as x,bB as B,bk as E,bz as N,bC as I,bm as L,bf as O,aC as r,aI as p,A as o,B as R,aK as T,aD as d,aL as g,aN as $,bn as j}from"./arco.9b5dfa89.js";import{C as q}from"./index.98608dac.js";const X=U({__name:"value",props:{type:null,values:null,envs:null},emits:["update"],setup(n,{expose:w,emit:b}){const s=n,f=v(),i=v(!1),y=v({}),a=v({});x(()=>s.values,c=>{a.value={},c.forEach(l=>{let u=l.value;(s.type==="int"||s.type==="float")&&(u=JSON.parse(l.value)),s.type==="bool"&&(u=l.value==="true"),a.value[String(l.environment_id)]=u}),y.value={...a.value}}),w({showUpdateDrawer:()=>{i.value=!0},closeDrawer:()=>{i.value=!1}});const V=async()=>{const c=await f.value.validate();if(console.log(c),c)return!1;const l=[];return s.envs.forEach(u=>{const m=a.value[String(u.id)];l.push({env_keyword:u.keyword,environment_id:u.id,value:String(m)})}),b("update",[...l]),!0};return(c,l)=>{const u=B,m=E,F=N,h=I,k=j,C=L,S=O;return o(),r(S,{visible:i.value,"onUpdate:visible":l[1]||(l[1]=e=>i.value=e),title:"\u8D44\u6E90\u503C\u914D\u7F6E",width:"380px",onCancel:l[2]||(l[2]=e=>i.value=!1),onBeforeOk:V},{default:p(()=>[n.type?(o(),r(C,{key:0,ref_key:"formRef",ref:f,model:a.value,"label-align":"left",layout:"vertical","auto-label-width":""},{default:p(()=>[(o(!0),R($,null,T(n.envs,(e,_)=>(o(),r(k,{key:_,field:String(e.id),label:e.name+"("+e.keyword+")",rules:[{required:!0,message:e.name+"("+e.keyword+")\u914D\u7F6E\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:p(()=>[n.type==="int"?(o(),r(u,{key:0,modelValue:a.value[String(e.id)],"onUpdate:modelValue":t=>a.value[String(e.id)]=t,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button",precision:0},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="float"?(o(),r(u,{key:1,modelValue:a.value[String(e.id)],"onUpdate:modelValue":t=>a.value[String(e.id)]=t,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C",mode:"button"},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="string"?(o(),r(m,{key:2,modelValue:a.value[String(e.id)],"onUpdate:modelValue":t=>a.value[String(e.id)]=t,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="textarea"?(o(),r(F,{key:3,modelValue:a.value[String(e.id)],"onUpdate:modelValue":t=>a.value[String(e.id)]=t,placeholder:"\u8BF7\u8F93\u5165\u53D8\u91CF\u503C","allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="bool"?(o(),r(h,{key:4,modelValue:a.value[String(e.id)],"onUpdate:modelValue":t=>a.value[String(e.id)]=t,type:"round"},{checked:p(()=>[g(" \u662F ")]),unchecked:p(()=>[g(" \u5426 ")]),_:2},1032,["modelValue","onUpdate:modelValue"])):d("",!0),n.type==="object"?(o(),r(q,{key:5,id:String(e.id),value:y.value[String(e.id)],style:{width:"100%",height:"150px"},"show-folding":!1,"show-line":!1,onChange:l[0]||(l[0]=(t,D)=>{a.value[D]=t})},null,8,["id","value"])):d("",!0)]),_:2},1032,["field","label","rules"]))),128))]),_:1},8,["model"])):d("",!0)]),_:1},8,["visible"])}}});export{X as _};
