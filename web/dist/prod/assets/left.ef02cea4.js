import{i as ee,_ as se}from"./index.9de08a74.js";/* empty css               */import{d as te,e as _,o as ae,aP as oe,aY as ne,X as le,bG as ue,bw as ie,Q as ce,bH as de,B as v,E as e,aJ as l,aM as d,aD as b,aL as m,aI as c,aR as U,aG as re,b0 as pe,b1 as _e,A as r,be as ve,aN as me,aK as he,aC as G,aS as fe,bI as Fe,bv as be}from"./arco.79b3a20c.js";import{p as ye}from"./server.cc9bc429.js";import{s as Ce,d as ge}from"./template.ed268d80.js";import Ee from"./compare.fc3adc7e.js";import"./chart.c056e818.js";import"./vue.73de78ef.js";/* empty css               *//* empty css               *//* empty css              *//* empty css                */const p=a=>(pe("data-v-80448c4d"),a=a(),_e(),a),ke={class:"service"},we=p(()=>e("div",{class:"hr"},[e("span",{class:"icon"}),e("span",{class:"title"},"\u670D\u52A1\u4FE1\u606F")],-1)),De={class:"item"},Ae=p(()=>e("span",{class:"label"},"\u6240\u5C5E\u670D\u52A1",-1)),xe={class:"select-input"},Be={key:0},Se={class:"item"},Te=p(()=>e("span",{class:"label"},"\u670D\u52A1\u540D\u79F0",-1)),Ie={class:"value"},Ve={class:"item"},Ne=p(()=>e("span",{class:"label"},"\u670D\u52A1\u6807\u5FD7",-1)),$e={class:"value"},Le={key:1,class:"hr",style:{"margin-top":"20px","margin-bottom":"10px"}},Me=p(()=>e("span",{class:"icon"},null,-1)),ze=p(()=>e("span",null,"\u6A21\u677F\u4FE1\u606F",-1)),Oe=[Me,ze],Ue={key:2},Ge={class:"item"},Je=p(()=>e("span",{class:"label"},"\u5F53\u524D\u7248\u672C",-1)),Pe={class:"value"},Re={class:"item"},He=p(()=>e("span",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),Ke={class:"value"},Qe={class:"item"},Xe=p(()=>e("span",{class:"label"},"\u7248\u672C\u63CF\u8FF0",-1)),Ye={class:"value"},je={key:3,class:"empty"},qe={class:"pane-title"},We={class:"version"},Ze={class:"description"},es={class:"version"},ss={class:"version"},ts=["onClick"],as=te({__name:"left",props:{template:null},emits:["select","switch"],setup(a,{emit:w}){var B;const J=a,u=_({}),y=_([]),E=_(),h=_(!1),D=_([]),k=_((B=J.template)==null?void 0:B.id),f=_(!1),A=_([]),x=async n=>{const{data:s}=await ye({page:1,page_size:10,keyword:n}),{list:C}=s;if(!C)return;const g=[];C.forEach(i=>{u.value.server_id!==i.id&&(i.fullName=`${i.name}(${i.keyword})`,g.push(i))});const F=[];y.value.forEach(i=>{i.id===u.value.server_id&&F.push(i)}),y.value=g.concat(F)},P=n=>{y.value.forEach(s=>{s.id===n&&(E.value=s)}),w("select",n)},R=async()=>{const{data:n}=await ge({page:1,page_size:15,server_id:u.value.server_id});D.value=n.list,h.value=!0},H=async()=>{await Ce({server_id:u.value.server_id,id:k.value}),h.value=!1,U.success("\u6A21\u677F\u5207\u6362\u6210\u529F"),w("switch")},K=n=>{if(!n.compare){U.error("\u65E0\u53D8\u66F4\u4FE1\u606F");return}A.value=JSON.parse(n.compare),f.value=!0};return ae(()=>{x()}),(n,s)=>{var T,I,V,N,$,L,M,z;const C=oe,g=ee,F=ne,i=le,Q=ue,X=ie,Y=ce,j=fe("CodeEditor"),q=Fe,W=de,S=re,Z=be("permission");return r(),v("div",ke,[we,e("div",De,[Ae,e("div",xe,[l(C,{modelValue:u.value.server_id,"onUpdate:modelValue":s[0]||(s[0]=o=>u.value.server_id=o),placeholder:"\u8BF7\u9009\u62E9\u670D\u52A1",scrollbar:!0,options:y.value,"field-names":{value:"id",label:"fullName"},onSearch:x,onChange:P},null,8,["modelValue","options"])])]),u.value.server_id?(r(),v("div",Be,[e("div",Se,[Te,e("span",Ie,d((T=E.value)==null?void 0:T.name),1)]),e("div",Ve,[Ne,e("span",$e,d((I=E.value)==null?void 0:I.keyword),1)])])):b("",!0),u.value.server_id?(r(),v("div",Le,Oe)):b("",!0),(V=a.template)!=null&&V.id?(r(),v("div",Ue,[e("div",Ge,[Je,e("span",Pe,[m(d((N=a.template)==null?void 0:N.version)+" ",1),l(F,{content:"\u5207\u6362\u6A21\u677F\u7248\u672C",position:"top"},{default:c(()=>[ve((r(),v("span",{class:"swap",onClick:R},[l(g)])),[[Z,"configure:template:history"]])]),_:1})])]),e("div",Re,[He,e("span",Ke,d(n.$formatTime(($=a.template)==null?void 0:$.created_at)),1)]),e("div",Qe,[Xe,e("span",Ye,d(a.template.description?a.template.description:"\u6682\u65E0\u63CF\u8FF0"),1)])])):b("",!0),!((L=a.template)!=null&&L.id)||!((M=u.value)!=null&&M.server_id)?(r(),v("div",je,[l(Q,null,{image:c(()=>[l(i)]),default:c(()=>{var o;return[m(" "+d((o=u.value)!=null&&o.server_id?"\u6682\u65E0\u914D\u7F6E\u6570\u636E":"\u8BF7\u5148\u9009\u62E9\u670D\u52A1"),1)]}),_:1})])):b("",!0),l(S,{visible:h.value,"onUpdate:visible":s[2]||(s[2]=o=>h.value=o),title:"\u5207\u6362\u914D\u7F6E","ok-text":"\u786E\u8BA4\u5207\u6362","ok-button-props":{disabled:k.value==((z=a.template)==null?void 0:z.id)},width:"900px","body-style":{height:"500px",padding:"0"},"unmount-on-close":"",onCancel:s[3]||(s[3]=o=>h.value=!1),onBeforeOk:H},{default:c(()=>{var o;return[l(W,{"default-active-key":(o=a.template)==null?void 0:o.id,direction:"vertical","destroy-on-hide":"",onChange:s[1]||(s[1]=t=>{k.value=t})},{default:c(()=>[(r(!0),v(me,null,he(D.value,t=>(r(),G(q,{key:t.id},{title:c(()=>{var O;return[e("div",qe,[e("div",We,[m(" \u7248\u672C\u53F7\uFF1A"+d(t.version)+" ",1),((O=a.template)==null?void 0:O.id)===t.id?(r(),G(X,{key:0,size:"small",color:"arcoblue"},{default:c(()=>[m("\u4F7F\u7528\u4E2D")]),_:1})):b("",!0)]),l(F,{content:t.description},{default:c(()=>[e("div",Ze,"\u7248\u672C\u63CF\u8FF0\uFF1A"+d(t.description),1)]),_:2},1032,["content"]),e("div",es,"\u63D0\u4EA4\u65F6\u95F4\uFF1A"+d(n.$formatTime(t.created_at)),1),e("div",ss,[m(" \u53D8\u66F4\u8BE6\u60C5\uFF1A "),e("span",{class:"compare",onClick:os=>K(t)},[m(" \u67E5\u770B "),l(Y)],8,ts)])])]}),default:c(()=>[l(j,{value:t==null?void 0:t.content,lang:t==null?void 0:t.format,"show-line":!1,"read-only":!0,style:{width:"100%",height:"500px"}},null,8,["value","lang"])]),_:2},1024))),128))]),_:1},8,["default-active-key"])]}),_:1},8,["visible","ok-button-props"]),l(S,{visible:f.value,"onUpdate:visible":s[4]||(s[4]=o=>f.value=o),title:"\u53D8\u66F4\u8BE6\u60C5",width:"900px","unmount-on-close":"","body-style":{height:"500px",padding:"0"},onCancel:s[5]||(s[5]=o=>f.value=!1),onBeforeOk:s[6]||(s[6]=o=>f.value=!1)},{default:c(()=>[l(Ee,{data:A.value},null,8,["data"])]),_:1},8,["visible"])])}}});const fs=se(as,[["__scopeId","data-v-80448c4d"]]);export{fs as default};
