import{o as y}from"./index.8c586312.js";/* empty css              *//* empty css               */import{d as $,e as a,br as G,B as L,aJ as o,aI as P,A as J,aR as i,aS as M}from"./arco.79b3a20c.js";import{p as j,a as q,u as H,d as K}from"./business.fc27ff40.js";import{u as O}from"./loading.4485fcab.js";import{a as Q}from"./env.6afc546e.js";import W from"./tool.89574b36.js";import{_ as X}from"./table.vue_vue_type_script_setup_true_lang.a3b39f54.js";import{_ as Y}from"./form.vue_vue_type_script_setup_true_lang.efd54697.js";import{_ as Z}from"./search.vue_vue_type_script_setup_true_lang.6900c891.js";import{_ as ee}from"./value.vue_vue_type_script_setup_true_lang.4e6eb1ff.js";import"./chart.c056e818.js";import"./vue.73de78ef.js";/* empty css               *//* empty css              *//* empty css               */import"./lodash.8c41d9ef.js";import"./sortable.esm.41bdaeb5.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./type.a4a3f801.js";/* empty css              *//* empty css               *//* empty css                */import"./server.663b0bbc.js";function ae(l){return y.get("/configure/v1/business/values",{params:{business_id:l}})}function se(l,u){return y.put("/configure/v1/business/value",{business_id:l,list:u})}const te={class:"container"},ne={name:"ConfigureBusiness"},ke=$({...ne,setup(l){const u=a(),v=a(),r=a({}),{setLoading:_}=O(!0),B=a(!1),f=a(),w=a(),d=a("medium"),g=a(0),h=a([]),F=a([]),c=a({type:""}),t=a({page:1,page_size:10,server_id:0}),p=a([{title:"\u53D8\u91CF\u6807\u5FD7",dataIndex:"keyword",slotName:"keyword"},{title:"\u53D8\u91CF\u7C7B\u578B",dataIndex:"type",slotName:"type"},{title:"\u53D8\u91CF\u63CF\u8FF0",dataIndex:"description",slotName:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",slotName:"createdAt"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updatedAt"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations"}]),z=async()=>{const{data:e}=await Q();h.value=e.list},C=async e=>{const{data:s}=await ae(e);F.value=s.list},n=async()=>{_(!0);try{const{data:e}=await j(t.value);f.value=e.list,g.value=e.total}finally{_(!1)}};z();const b=async e=>{await q(e),n(),i.success("\u521B\u5EFA\u6210\u529F")},A=async e=>{await H(e),n(),i.success("\u66F4\u65B0\u6210\u529F")},D=async e=>{await K(e),n(),i.success("\u5220\u9664\u6210\u529F")},S=async e=>{const s=t.value.page_size;t.value={...e,page:1,page_size:s},n()},x=async e=>{var s;await se((s=c.value)==null?void 0:s.id,e),i.success("\u914D\u7F6E\u6210\u529F")},U=()=>{r.value={server_id:t.value.server_id},u.value.showAddDrawer()},I=e=>{r.value={...e},u.value.showUpdateDrawer()},N=e=>{r.value={},u.value.showAddDrawer()},k=e=>{c.value=e,C(e.id),v.value.showUpdateDrawer()},E=e=>{t.value.server_id=e,n()},R=async e=>{t.value.page=e.current,t.value.page_size=e.pageSize,n()};return(e,s)=>{const T=M("Breadcrumb"),V=G;return J(),L("div",te,[o(T),o(V,{class:"general-card"},{default:P(()=>[o(Z,{onSearch:S,onSelect:E}),o(W,{size:d.value,"onUpdate:size":s[0]||(s[0]=m=>d.value=m),columns:p.value,"onUpdate:columns":s[1]||(s[1]=m=>p.value=m),"enable-create":!!t.value.server_id,onRefresh:n,onAdd:U},null,8,["size","columns","enable-create"]),o(X,{columns:p.value,loading:B.value,data:f.value,size:d.value,total:g.value,pagination:{current:t.value.page,pageSize:t.value.page_size},onPageChange:R,onAdd:N,onUpdate:I,onDelete:D,onSet:k},null,8,["columns","loading","data","size","total","pagination"]),o(Y,{ref_key:"formRef",ref:u,data:r.value,servers:w.value,onAdd:b,onUpdate:A},null,8,["data","servers"]),o(ee,{ref_key:"valueRef",ref:v,type:c.value.type,values:F.value,envs:h.value,onUpdate:x},null,8,["type","values","envs"])]),_:1})])}}});export{ke as default};
